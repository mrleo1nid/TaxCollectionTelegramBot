services:
  bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: tax-collection-bot
    restart: unless-stopped
    environment:
      - BotConfiguration__Token=${BOT_TOKEN}
      - BotConfiguration__AdminId=${ADMIN_ID}
      - ConnectionStrings__DefaultConnection=Data Source=/app/data/bot.db
      - Instruction__FilePath=${INSTRUCTION_FILE_PATH:-/app/instruction.txt}
    volumes:
      - bot-data:/app/data
      - ./instruction.txt:/app/instruction.txt
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

volumes:
  bot-data:
